{"version":3,"sources":["app/pages/home/Modal.js","app/pages/home/usertypes/components/UserTypesInput.js","app/pages/home/usertypes/components/viewUserTypes.js","app/pages/home/usertypes/UserTypes.js"],"names":["ModalTable","props","size","dialogClassName","show","open","onHide","handleClose","centered","Header","closeButton","Title","title","Body","children","UserTypesInput","data","userType","onSubmit","handleSubmit","Container","Row","Col","xs","InputGroup","className","TextField","onChange","handleChange","id","label","value","businessUserRoleName","variant","InputLabelProps","shrink","fullWidth","required","FormControlLabel","control","Checkbox","checked","active","handleChangeActive","color","Button","type","notify","success","toast","message","error","connect","state","businessId","auth","user","mainRole","business","useState","setState","reRender","setRerender","initialInput","name","isModalOpen","setIsModalOpen","isUpdate","setIsUpdate","input","setInput","getBusinessId","a","getBusiness","useEffect","getUserTypeList","usertypes","columns","field","width","render","rowData","canBeDeleted","onClick","deleteType","role","length","getData","handleSubmitTypes","e","preventDefault","newInput","updateUserType","addUserType","refreshTable","deleteUserType","target","handleChangeUserType","dataSource","bordered","showHeader","loading","Accounts","exact","from","to","path","component","viewUserTypes"],"mappings":"kGAAA,6BAuBeA,IAnBI,SAAAC,GACjB,OACE,6BACE,kBAAC,IAAD,CACEC,KAAK,KACLC,gBAAgB,YAChBC,KAAMH,EAAMI,KACZC,OAAQL,EAAMM,YACdC,UAAQ,GAER,kBAAC,IAAMC,OAAP,CAAcC,aAAW,GACvB,kBAAC,IAAMC,MAAP,KAAcV,EAAMW,QAEtB,kBAAC,IAAMC,KAAP,KAAaZ,EAAMa,c,oQCoFZC,EAxFQ,SAACd,GACDA,EAAMe,KAAnBC,SACR,OACE,0BAAMC,SAAUjB,EAAMkB,cACpB,kBAACC,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CAAKC,GAAI,IACP,kBAACC,EAAA,EAAD,CAAYC,UAAU,QACpB,kBAACC,EAAA,EAAD,CACEC,SAAU1B,EAAM2B,aAChBC,GAAG,uBACHC,MAAM,OACNL,UAAU,GACVM,MAAO9B,EAAMe,KAAKgB,qBAClBC,QAAQ,WACRC,gBAAiB,CACfC,QAAQ,GAEVjC,KAAK,QACLkC,WAAW,EACXC,UAAQ,MAoCd,kBAACf,EAAA,EAAD,CAAKC,GAAI,IACP,kBAACe,EAAA,EAAD,CACEC,QACE,kBAACC,EAAA,EAAD,CACEC,QAASxC,EAAMe,KAAK0B,OACpBf,SAAU1B,EAAM0C,mBAChBd,GAAG,SACHe,MAAM,YAGVd,MAAM,YAGV,kBAACR,EAAA,EAAD,CAAKC,GAAI,IACP,kBAACC,EAAA,EAAD,KACE,kBAACqB,EAAA,EAAD,CACEC,KAAK,SACL5C,KAAK,QACLuB,UAAU,cACVQ,QAAQ,YACRW,MAAM,WALR,iB,SCjERG,G,OAAS,SAAC/B,GACVA,EAAKgC,QACPC,IAAMD,QAAQhC,EAAKkC,SAEnBD,IAAME,MAAMnC,EAAKkC,WAiMNE,eANS,SAACC,GACvB,MAAO,CACLC,WAAYD,EAAME,KAAKC,KAAKC,SAASC,SAAS7B,MAInCuB,EA7LM,SAACnD,GAAW,IAAD,EACJ0D,mBAAS,IADL,mBACvBN,EADuB,KAChBO,EADgB,OAEED,oBAAS,GAFX,mBAEvBE,EAFuB,KAEbC,EAFa,KAIxBC,EAAe,CACnBlC,GAAI,GACJmC,KAAM,GACNhC,qBAAsB,GACtBU,QAAQ,GARoB,EAUQiB,oBAAS,GAVjB,mBAUvBM,EAVuB,KAUVC,EAVU,OAWEP,oBAAS,GAXX,mBAWvBQ,EAXuB,KAWbC,EAXa,OAYJT,mBAASI,GAZL,mBAYvBM,EAZuB,KAYhBC,EAZgB,KAcxBC,EAAa,uCAAG,8BAAAC,EAAA,sEACGC,cADH,cACdf,EADc,OAEZ7B,EAAO6B,EAAS1C,KAAhBa,GAFY,kBAGbA,GAHa,2CAAH,qDAMnB6C,qBAAU,WACRd,EAAS,IACI,uCAAG,8BAAAY,EAAA,sEACGD,IADH,cACR1C,EADQ,gBAEU8C,YAAgB9C,GAF1B,OAER+C,EAFQ,OAGdhB,EAAS,CACPiB,QAAS,CACP,CACEjE,MAAO,SACPkE,MAAO,UACPC,MAAO,IACPC,OAAQ,SAACC,GACP,OACE,kBAAC5D,EAAA,EAAD,KAgBG4D,EAAQC,aACP,kBAAC5D,EAAA,EAAD,KACE,kBAACuB,EAAA,EAAD,CACEZ,QAAQ,YACR/B,KAAK,QACLiF,QAAS,WACPC,EAAWH,EAAQpD,MAGrB,kBAAC,IAAD,QAGF,QAKZ,CACEjB,MAAO,OACPkE,MAAO,uBACPE,OAAQ,SAACK,GAAD,OAAUA,EAAKrD,uBAEzB,CAAEpB,MAAO,gBAAiBoE,OAAQ,SAAChE,GAAD,OAAU4D,EAAU5D,KAAKsE,SAC3D,CACE1E,MAAO,SACPkE,MAAO,SACPE,OAAQ,SAACtC,GAAD,OAAaA,EAAOA,OAAS,OAAS,WAGlD1B,KAAM4D,EAAU5D,OAxDJ,2CAAH,oDA2DbuE,KACC,CAAC1B,IAEJ,IAyBM2B,EAAiB,uCAAG,WAAOC,GAAP,eAAAjB,EAAA,yDACxBiB,EAAEC,iBACIC,EAFkB,eAEFtB,EAFE,CAEKf,WAAYrD,EAAMqD,cAC3Ca,EAHoB,0CAKGyB,YAAeD,GALlB,cAMpB5C,EAAO,CAAEC,SAAS,EAAME,QAAS,gCANb,6DASnBiB,EATmB,4CAWG0B,YAAYF,GAXf,eAYpB5C,EAAO,CAAEC,SAAS,EAAME,QAAS,+BAZb,2DAexBgB,GAAe,GACfJ,GAAaD,GAhBW,kEAAH,sDAmBjBiC,EAAe,kBAAMhC,GAAaD,IAElCuB,EAAU,uCAAG,WAAOvD,GAAP,SAAA2C,EAAA,sEACEuB,YAAelE,GADjB,cAEjBiC,GAAaD,GAFI,2CAAH,sDAKhB,OACE,oCACE,kBAAC,IAAD,CACEf,KAAK,YACLlC,MAAM,aACNP,KAAM4D,EACN1D,YAzDa,WACjB2D,GAAe,KA0DX,kBAAC,EAAD,CACElD,KAAMqD,EACNzC,aAzDa,SAAC6D,GACpBnB,EAAS,eACJD,EADG,eAELoB,EAAEO,OAAOnE,GAAK4D,EAAEO,OAAOjE,UAuDpBZ,aAAcqE,EACdS,qBApDqB,SAACR,GAC5BnB,EAAS,eACJD,EADG,CAENpD,SAAUwE,EAAEO,OAAOjE,UAkDfY,mBA9CmB,SAAC8C,GAC1BnB,EAAS,eACJD,EADG,CAEN3B,QAAS2B,EAAM3B,cA8Cf,kBAAC,IAAD,CACEmC,QAASxB,EAAMwB,QACfqB,WAAY7C,EAAMrC,KAClBJ,MAAO,kBACL,oCACE,kBAACiC,EAAA,EAAD,CACEpB,UAAU,OACVQ,QAAQ,YACRW,MAAM,YACN1C,KAAK,QACLiF,QAAS,WACPjB,GAAe,GACfE,GAAY,GACZE,EAASP,KARb,OAaA,kBAAClB,EAAA,EAAD,CAAQpB,UAAU,cAAc0D,QAASW,GAAzC,aAKJK,UAAQ,EACRjG,KAAK,QACLkG,YAAU,EACVC,SAAUhD,EAAMrC,WCzMT,SAASsF,IACtB,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAUC,OAAO,EAAMC,KAAK,IAAIC,GAAG,eACnC,kBAAC,IAAD,CAAOC,KAAK,aAAaC,UAAWC,KAP1C","file":"static/js/18.67194172.chunk.js","sourcesContent":["import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Modal } from 'react-bootstrap';\r\n\r\nconst ModalTable = props => {\r\n  return (\r\n    <div>\r\n      <Modal\r\n        size=\"lg\"\r\n        dialogClassName='modal-90w'\r\n        show={props.open}\r\n        onHide={props.handleClose}\r\n        centered\r\n      >\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>{props.title}</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>{props.children}</Modal.Body>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ModalTable;\r\n","import React from 'react';\r\nimport {\r\n  TextField,\r\n  Button,\r\n  FormControlLabel,\r\n  Radio,\r\n  RadioGroup,\r\n  FormControl,\r\n  FormLabel,\r\n  Checkbox,\r\n} from '@material-ui/core';\r\nimport { Container, InputGroup, Row, Col } from 'react-bootstrap';\r\n\r\nconst UserTypesInput = (props) => {\r\n  const { userType } = props.data;\r\n  return (\r\n    <form onSubmit={props.handleSubmit}>\r\n      <Container>\r\n        <Row>\r\n          <Col xs={12}>\r\n            <InputGroup className='mb-4'>\r\n              <TextField\r\n                onChange={props.handleChange}\r\n                id='businessUserRoleName'\r\n                label='Name'\r\n                className=''\r\n                value={props.data.businessUserRoleName}\r\n                variant='outlined'\r\n                InputLabelProps={{\r\n                  shrink: true,\r\n                }}\r\n                size='small'\r\n                fullWidth={true}\r\n                required\r\n              />\r\n            </InputGroup>\r\n          </Col>\r\n          {/* <Col xs={12}>\r\n            <FormControl component='fieldset'>\r\n              <FormLabel component='legend'>User Type</FormLabel>\r\n              <RadioGroup\r\n                row\r\n                name='position'\r\n                defaultValue={userType || ''}\r\n                onChange={props.handleChangeUserType}\r\n              >\r\n                <FormControlLabel\r\n                  value='Business Owner'\r\n                  control={<Radio color='primary' />}\r\n                  label='Business Owner'\r\n                />\r\n                <FormControlLabel\r\n                  value='Admin'\r\n                  control={<Radio color='primary' />}\r\n                  label='Admin'\r\n                />\r\n                <FormControlLabel\r\n                  value='Agent'\r\n                  control={<Radio color='primary' />}\r\n                  label='Agent'\r\n                />\r\n                <FormControlLabel\r\n                  value='Affiliate'\r\n                  control={<Radio color='primary' />}\r\n                  label='Affiliate'\r\n                />\r\n              </RadioGroup>\r\n            </FormControl>\r\n          </Col> */}\r\n          <Col xs={12}>\r\n            <FormControlLabel\r\n              control={\r\n                <Checkbox\r\n                  checked={props.data.active}\r\n                  onChange={props.handleChangeActive}\r\n                  id='active'\r\n                  color='primary'\r\n                />\r\n              }\r\n              label='Active'\r\n            />\r\n          </Col>\r\n          <Col xs={12}>\r\n            <InputGroup>\r\n              <Button\r\n                type='submit'\r\n                size='large'\r\n                className='float-right'\r\n                variant='contained'\r\n                color='primary'\r\n              >\r\n                Confirm\r\n              </Button>\r\n            </InputGroup>\r\n          </Col>\r\n        </Row>\r\n      </Container>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default UserTypesInput;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Row, Col, Container } from 'react-bootstrap';\r\nimport { connect } from 'react-redux';\r\nimport {\r\n  getUserTypeList,\r\n  addUserType,\r\n  updateUserType,\r\n  deleteUserType,\r\n} from '../../../../services/userType.service';\r\nimport { getBusiness } from '../../../../services/business.service';\r\nimport { Table } from 'antd';\r\nimport { Button, CircularProgress } from '@material-ui/core';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport TableModal from '../../Modal';\r\nimport UserTypesInput from './UserTypesInput';\r\n\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nconst notify = (data) => {\r\n  if (data.success) {\r\n    toast.success(data.message);\r\n  } else {\r\n    toast.error(data.message);\r\n  }\r\n};\r\n\r\nconst ViewUserType = (props) => {\r\n  const [state, setState] = useState({});\r\n  const [reRender, setRerender] = useState(false); // Re render table after updating\r\n\r\n  const initialInput = {\r\n    id: '',\r\n    name: '',\r\n    businessUserRoleName: '',\r\n    active: true,\r\n  };\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [isUpdate, setIsUpdate] = useState(false);\r\n  const [input, setInput] = useState(initialInput);\r\n\r\n  const getBusinessId = async () => {\r\n    const business = await getBusiness();\r\n    const { id } = business.data;\r\n    return id;\r\n  };\r\n\r\n  useEffect(() => {\r\n    setState({});\r\n    const getData = async () => {\r\n      const id = await getBusinessId();\r\n      const usertypes = await getUserTypeList(id);\r\n      setState({\r\n        columns: [\r\n          {\r\n            title: 'Action',\r\n            field: 'actions',\r\n            width: 200,\r\n            render: (rowData) => {\r\n              return (\r\n                <Row>\r\n                  {/* <Col>\r\n                    <Button\r\n                      variant='contained'\r\n                      color='secondary'\r\n                      size='small'\r\n                      title={rowData.id}\r\n                      onClick={() => {\r\n                        setInput(rowData);\r\n                        setIsUpdate(true);\r\n                        setIsModalOpen(true);\r\n                      }}\r\n                    >\r\n                      <EditIcon />\r\n                    </Button>\r\n                  </Col> */}\r\n                  {rowData.canBeDeleted ? (\r\n                    <Col>\r\n                      <Button\r\n                        variant='contained'\r\n                        size='small'\r\n                        onClick={() => {\r\n                          deleteType(rowData.id);\r\n                        }}\r\n                      >\r\n                        <DeleteIcon />\r\n                      </Button>\r\n                    </Col>\r\n                  ) : null}\r\n                </Row>\r\n              );\r\n            },\r\n          },\r\n          {\r\n            title: 'Name',\r\n            field: 'businessUserRoleName',\r\n            render: (role) => role.businessUserRoleName,\r\n          },\r\n          { title: 'Include Users', render: (data) => usertypes.data.length },\r\n          {\r\n            title: 'Active',\r\n            field: 'active',\r\n            render: (active) => (active.active ? 'true' : 'false'),\r\n          },\r\n        ],\r\n        data: usertypes.data,\r\n      });\r\n    };\r\n    getData();\r\n  }, [reRender]);\r\n\r\n  const closeModal = () => {\r\n    setIsModalOpen(false);\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    setInput({\r\n      ...input,\r\n      [e.target.id]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const handleChangeUserType = (e) => {\r\n    setInput({\r\n      ...input,\r\n      userType: e.target.value,\r\n    });\r\n  };\r\n\r\n  const handleChangeActive = (e) => {\r\n    setInput({\r\n      ...input,\r\n      active: !input.active,\r\n    });\r\n  };\r\n\r\n  const handleSubmitTypes = async (e) => {\r\n    e.preventDefault();\r\n    const newInput = { ...input, businessId: props.businessId };\r\n    if (isUpdate) {\r\n      try {\r\n        const usertype = await updateUserType(newInput);\r\n        notify({ success: true, message: 'Success updating user type.' });\r\n      } catch (error) {}\r\n    }\r\n    if (!isUpdate) {\r\n      try {\r\n        const usertype = await addUserType(newInput);\r\n        notify({ success: true, message: 'Success adding user types.' });\r\n      } catch (error) {}\r\n    }\r\n    setIsModalOpen(false);\r\n    setRerender(!reRender);\r\n  };\r\n\r\n  const refreshTable = () => setRerender(!reRender);\r\n\r\n  const deleteType = async (id) => {\r\n    const type = await deleteUserType(id);\r\n    setRerender(!reRender);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <TableModal\r\n        type='usertypes'\r\n        title='User Types'\r\n        open={isModalOpen}\r\n        handleClose={closeModal}\r\n      >\r\n        <UserTypesInput\r\n          data={input}\r\n          handleChange={handleChange}\r\n          handleSubmit={handleSubmitTypes}\r\n          handleChangeUserType={handleChangeUserType}\r\n          handleChangeActive={handleChangeActive}\r\n        />\r\n      </TableModal>\r\n      <Table\r\n        columns={state.columns}\r\n        dataSource={state.data}\r\n        title={() => (\r\n          <>\r\n            <Button\r\n              className='mb-2'\r\n              variant='contained'\r\n              color='secondary'\r\n              size='large'\r\n              onClick={() => {\r\n                setIsModalOpen(true);\r\n                setIsUpdate(false);\r\n                setInput(initialInput);\r\n              }}\r\n            >\r\n              Add\r\n            </Button>\r\n            <Button className='float-right' onClick={refreshTable}>\r\n              Refresh\r\n            </Button>\r\n          </>\r\n        )}\r\n        bordered\r\n        size='small'\r\n        showHeader\r\n        loading={!state.data ? true : false}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    businessId: state.auth.user.mainRole.business.id,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(ViewUserType);\r\n","import React from 'react';\r\nimport { Redirect, Route, Switch } from 'react-router-dom';\r\nimport viewUserTypes from './components/viewUserTypes';\r\nexport default function Accounts() {\r\n  return (\r\n    <Switch>\r\n      <Redirect exact={true} from='/' to='/usertypes' />\r\n      <Route path='/usertypes' component={viewUserTypes} />\r\n    </Switch>\r\n  );\r\n}\r\n"],"sourceRoot":""}